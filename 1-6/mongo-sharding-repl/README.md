# MongoDB Sharding с Replication

Демонстрационный проект MongoDB с шардированием и репликацией. Включает конфигурационный сервер в формате replica set, два шарда (каждый как replica set) и роутер (mongos).


## Запуск

1. **Запустите сервисы:**
```bash
docker compose up -d
```

2. **Проверьте статус контейнеров:**
```bash
docker compose ps
```

3. **Инициализируйте шардирование:**
```bash
chmod +x scripts/mongo-init.sh
./scripts/mongo-init.sh
```

Скрипт выполнит следующие действия:
- Инициализирует replica set для config server (3 реплики)
- Инициализирует replica set для shard1 (3 реплики)
- Инициализирует replica set для shard2 (3 реплики)
- Добавит шарды в роутер (mongos)
- Создаст базу данных `somedb` с включенным шардированием
- Создаст коллекцию `helloDoc` с hashed sharding по полю `name`
- Заполнит коллекцию 1000 тестовыми документами
- Проверит распределение документов между шардами (каждым из 3 реплик)


## Как проверить

Откройте в браузере http://localhost:8080


## Доступные эндпоинты

Список доступных эндпоинтов, swagger http://localhost:8080/docs